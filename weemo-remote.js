function AugumentedStatsResponse(a){this.response=a,this.addressPairMap=[]}Object.create||(Object.create=function(){function a(){}return function(b){if(1!=arguments.length)throw new Error("Object.create implementation only accepts one parameter.");return a.prototype=b,new a}}());var WeemoUtils=function(){"use strict";this.strpos=function(a,b,c){var d=String(a).indexOf(b,c||0);return-1===d&&(d=!1),d},this.trim=function(a,b){var c,d,e=0;for(a+="",b?(b+="",c=b.replace(/([\[\]\(\)\.\?\/\*\{\}\+\$\^\:])/g,"$1")):c=" \n\r	\f            ​\u2028\u2029　",d=a.length,e=0;d>e;e+=1)if(-1===c.indexOf(a.charAt(e))){a=a.substring(e);break}for(d=a.length,e=d-1;e>=0;e-=1)if(-1===c.indexOf(a.charAt(e))){a=a.substring(0,e+1);break}return-1===c.indexOf(a.charAt(0))?a:""},this.sha1=function(a){var b,c,d,e,f,g,h,i,j,k,l=function(a,b){var c=a<<b|a>>>32-b;return c},m=function(a){var b,c,d="";for(b=7;b>=0;b-=1)c=a>>>4*b&15,d+=c.toString(16);return d},n=new Array(80),o=1732584193,p=4023233417,q=2562383102,r=271733878,s=3285377520,t=[];for(a=this.utf8_encode(a),k=a.length,c=0;k-3>c;c+=4)d=a.charCodeAt(c)<<24|a.charCodeAt(c+1)<<16|a.charCodeAt(c+2)<<8|a.charCodeAt(c+3),t.push(d);switch(k%4){case 0:c=2147483648;break;case 1:c=a.charCodeAt(k-1)<<24|8388608;break;case 2:c=a.charCodeAt(k-2)<<24|a.charCodeAt(k-1)<<16|32768;break;case 3:c=a.charCodeAt(k-3)<<24|a.charCodeAt(k-2)<<16|a.charCodeAt(k-1)<<8|128}for(t.push(c);t.length%16!=14;)t.push(0);for(t.push(k>>>29),t.push(k<<3&4294967295),b=0;b<t.length;b+=16){for(c=0;16>c;c+=1)n[c]=t[b+c];for(c=16;79>=c;c+=1)n[c]=l(n[c-3]^n[c-8]^n[c-14]^n[c-16],1);for(e=o,f=p,g=q,h=r,i=s,c=0;19>=c;c+=1)j=l(e,5)+(f&g|~f&h)+i+n[c]+1518500249&4294967295,i=h,h=g,g=l(f,30),f=e,e=j;for(c=20;39>=c;c+=1)j=l(e,5)+(f^g^h)+i+n[c]+1859775393&4294967295,i=h,h=g,g=l(f,30),f=e,e=j;for(c=40;59>=c;c+=1)j=l(e,5)+(f&g|f&h|g&h)+i+n[c]+2400959708&4294967295,i=h,h=g,g=l(f,30),f=e,e=j;for(c=60;79>=c;c+=1)j=l(e,5)+(f^g^h)+i+n[c]+3395469782&4294967295,i=h,h=g,g=l(f,30),f=e,e=j;o=o+e&4294967295,p=p+f&4294967295,q=q+g&4294967295,r=r+h&4294967295,s=s+i&4294967295}return j=m(o)+m(p)+m(q)+m(r)+m(s),j.toLowerCase()},this.utf8_decode=function(a){var b=[],c=0,d=0,e=0,f=0,g=0,h=0;for(a+="";c<a.length;)e=a.charCodeAt(c),191>=e?(d+=1,b[d]=String.fromCharCode(e),c+=1):223>=e?(f=a.charCodeAt(c+1),d+=1,b[d]=String.fromCharCode((31&e)<<6|63&f),c+=2):239>=e?(f=a.charCodeAt(c+1),g=a.charCodeAt(c+2),d+=1,b[d]=String.fromCharCode((15&e)<<12|(63&f)<<6|63&g),c+=3):(f=a.charCodeAt(c+1),g=a.charCodeAt(c+2),h=a.charCodeAt(c+3),e=(7&e)<<18|(63&f)<<12|(63&g)<<6|63&h,e-=65536,d+=1,b[d]=String.fromCharCode(55296|e>>10&1023),d+=1,b[d]=String.fromCharCode(56320|1023&e),c+=4);return b.join("")},this.utf8_encode=function(a){if(null===a||void 0===a)return"";var b,c,d,e,f,g,h=a,i="",j=0;for(b=c=0,j=h.length,d=0;j>d;d+=1){if(e=h.charCodeAt(d),f=null,128>e)c+=1;else if(e>127&&2048>e)f=String.fromCharCode(e>>6|192,63&e|128);else if(e&!0)f=String.fromCharCode(e>>12|224,e>>6&63|128,63&e|128);else{if(e&!0)throw new RangeError("Unmatched trail surrogate at "+d);if(g=h.charCodeAt(++d),g&!0)throw new RangeError("Unmatched lead surrogate at "+(d-1));e=((1023&e)<<10)+(1023&g)+65536,f=String.fromCharCode(e>>18|240,e>>12&63|128,e>>6&63|128,63&e|128)}null!==f&&(c>b&&(i+=h.slice(b,c)),i+=f,b=c=d+1)}return c>b&&(i+=h.slice(b,j)),i}},Weemo=function(pAppId,pToken,pType,options,pDebugLevel,pDisplayName,pUseJquery,pDefaultStyle,others){var version="5.1.2752",state="NOT_CONNECTED",browser="",browserVersion="",os="Unknown OS",protocol="weemodriver-protocol",wsUri="wss://localhost:34679",longpollUri="https://localhost:34679",others=others||{},self=this,longpollId=null,token=pToken,webAppId=pAppId,endpointUrl="",force=!1,debugLevel=0,weemoType=pType,hap="object"==typeof options&&void 0!=options.hap?options.hap:void 0!==options&&"string"==typeof options?options:"",displayName="",downloadTimeout=null,downloadTimeoutValue=0,pollingTimeout=16e3,messageTimeout=5e3,downloadUrl="https://download.weemo.com/file/release/73",websock,connectionDelay=2e3,connectTimeout=null,callObjects=[],utils=new WeemoUtils,calledContact="",forceClose=!1,debug=function(a){window.console&&debugLevel>0&&console.log(a)},mobile,screenSize,osVersion,mode="wd_only",connectWith,attempt=0,wdVersion,useJquery="object"==typeof options&&void 0!=options.useJquery?options.useJquery:void 0!==pUseJquery?pUseJquery:!1,loadCss="object"==typeof options&&void 0!=options.defaultStyle?options.defaultStyle:void 0!==pDefaultStyle?pDefaultStyle:!0,loadDefaultStyle=function(){var a=(document.getElementsByTagName("head")[0].innerHTML,hap.substring(0,3)),b=document.createElement("link");switch(b.setAttribute("type","text/css"),b.setAttribute("rel","stylesheet"),a){case"dev":b.setAttribute("href","https://static-dev.weemo.com/css/weemo2.css");break;case"qua":b.setAttribute("href","https://static-qualif.weemo.com/css/weemo2.css");break;case"ppr":b.setAttribute("href","https://static-ppr.weemo.com/css/weemo2.css");break;default:b.setAttribute("href","https://static.weemo.com/css/weemo2.css")}document.getElementsByTagName("head")[0].appendChild(b)},webRTCCapabilities=function(){var a,b=Object.create(null);return window.navigator.webkitGetUserMedia?b.getUserMedia=window.navigator.webkitGetUserMedia.bind(navigator):window.navigator.mozGetUserMedia?b.getUserMedia=window.navigator.mozGetUserMedia.bind(navigator):window.navigator.getUserMedia&&(b.getUserMedia=window.navigator.getUserMedia.bind(navigator)),window.webkitRTCPeerConnection?b.RTCPeerConnection=window.webkitRTCPeerConnection:window.mozRTCPeerConnection?b.RTCPeerConnection=window.mozRTCPeerConnection:window.RTCPeerConnection&&(b.RTCPeerConnection=window.RTCPeerConnection),window.webkitRTCSessionDescription?b.RTCSessionDescription=window.webkitRTCSessionDescription:window.mozRTCSessionDescription?b.RTCSessionDescription=window.mozRTCSessionDescription:window.RTCSessionDescription&&(b.RTCSessionDescription=window.RTCSessionDescription),a=b.getUserMedia&&b.RTCPeerConnection&&b.RTCSessionDescription&&"Chrome"===browser?!0:!1},uniqid=function(){var a=new Date;return a.getTime()%2147483647},getXDomainRequest=function(){var a=null;return window.XDomainRequest?a=new XDomainRequest:window.XMLHttpRequest?a=new XMLHttpRequest:debug("Your browser does not support AJAX cross-domain!"),a},polling=function(){if(useJquery===!0&&window.jQuery)jQuery.ajax(longpollUri,{data:{command:longpollId+":<poll></poll>"},dataType:"jsonp",timeout:pollingTimeout,beforeSend:function(){},success:function(a){if(sm("connected"),""!=a&&void 0!=a){var b=utils.strpos(a.x,":");if(b!==!1){var c=a.x.substring(0,b);c==longpollId&&(a.x=a.x.substring(b+1),handleData(a.x),polling())}else polling()}},error:function(){sm("not_connected")}});else{var xdr=getXDomainRequest();xdr.timeout=12e3,xdr.onload=function(){eval(xdr.responseText),debug("########################"),debug("Completed (polling) !"),debug("########################")},xdr.onerror=function(){debug("########################"),debug("An error occured (polling) !"),debug("########################"),debug(xdr),sm("not_connected")},xdr.ontimeout=function(){debug("########################"),debug("Timeout (polling) !"),debug("########################"),debug(xdr),sm("not_connected")},xdr.onprogress=function(){debug("########################"),debug("Request in progress (polling) !"),debug("########################"),debug(xdr)},uri=encodeURIComponent(longpollId+":<poll></poll>");var ts=(new Date).getTime()/1e3;xdr.open("GET",longpollUri+"?callback=jQueryPolling&command="+uri+"&_="+ts),xdr.send()}},sendMessage=function(val,type){if(useJquery===!0&&window.jQuery){var message=new String;""!=val&&void 0!=val&&(message=val),"Microsoft Internet Explorer"==browser&&11>browserVersion?jqXHR=jQuery.ajax(longpollUri,{timeout:messageTimeout,beforeSend:function(){},data:{command:longpollId+":"+message},dataType:"jsonp",success:function(a){debug("BROWSER TO WEEMODRIVER >>>>>> "+message),a=utils.trim(a.x);var b=utils.strpos(a,":");if(b!==!1){var c=a.substring(0,b);a=a.substring(b+1)}if(""!=a&&void 0!=a&&void 0!=c&&c==longpollId)try{handleData(a)}catch(d){debug(d)}},error:function(a){debug(a)}}):void 0!=websock&&null!=websock&&(websock.send(message),debug("BROWSER TO WEEMODRIVER >>>>>> "+message))}else{var message=new String;if(""!=val&&void 0!=val&&(message=val),"Microsoft Internet Explorer"==browser&&11>browserVersion){var xdr=getXDomainRequest();xdr.timeout=messageTimeout,xdr.onload=function(){debug("BROWSER TO WEEMODRIVER >>>>>> "+message),eval(xdr.responseText),debug("########################"),debug("Completed (sendMessage) !"),debug("########################")},xdr.onerror=function(){debug("########################"),debug("An error occured (sendMessage) !"),debug("########################"),debug(xdr)},xdr.ontimeout=function(){debug("########################"),debug("Timeout (sendMessage) !"),debug("########################"),debug(xdr)},xdr.onprogress=function(){debug("########################"),debug("Request in progress (sendMessage) !"),debug("########################"),debug(xdr)},uri=encodeURIComponent(longpollId+":"+message);var ts=(new Date).getTime();xdr.open("GET",longpollUri+"?callback=jQuerySendMessage&command="+uri+"&_="+ts),xdr.send()}else void 0!=websock&&null!=websock&&(websock.send(message),debug("BROWSER TO WEEMODRIVER >>>>>> "+message))}},connect=function(){"webrtc"===connectWith?pingMgmt():void 0===hap||null===hap||""===hap?sendMessage("<connect hap=''></connect>"):sendMessage("<connect hap='"+hap+"'></connect>")},handleData=function(a){debug(a);var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G="",H=Object.create(null);if(window.DOMParser?(b=new DOMParser,c=b.parseFromString(a,"text/xml")):(c=new ActiveXObject("Microsoft.XMLDOM"),c.async=!1,c.loadXML(a)),d=c.getElementsByTagName("connected")[0],void 0!==d&&null!==d)e=c.getElementsByTagName("connected")[0].childNodes[0].nodeValue,G="ok"===e?"onConnect":"onConnectionFailed";else if(f=c.getElementsByTagName("readyforauthentication")[0],void 0!==f&&null!==f)G="onReadyforauthentication";else if(g=c.getElementsByTagName("verifieduser")[0],void 0!==g&&null!==g)h=g.childNodes[0].nodeValue,"ok"===h?G="onVerifiedUserOk":"loggedasotheruser"===h?G="loggedasotheruser":(G="onVerifiedUserNok",i=g.getElementsByTagName("error")[0],void 0!==i&&(H.error=i.getAttribute("code")));else if(j=c.getElementsByTagName("status")[0],void 0!==j&&null!==j)k=j.getElementsByTagName("xmpp")[0],void 0!==k&&null!==k?G="ok"===k.childNodes[0].nodeValue?"xmppOk":"xmppNok":(l=j.getElementsByTagName("sip")[0],void 0!==l&&null!==l?G="ok"===l.childNodes[0].nodeValue?"sipOk":"sipNok":(m=j.getElementsByTagName("audio")[0],void 0!==m&&null!==m&&(G="ok"===m.childNodes[0].nodeValue?"audioOk":"audioNok")));else if(n=c.getElementsByTagName("set")[0],void 0!==n&&null!==n)if(G="set",o=n.getAttribute("displayname"),void 0!==o&&null!==o)H.name="displayName",H.value=o;else if(p=n.getAttribute("version"),void 0!==p&&null!==p)H.name="version",H.value=p;else if(q=n.getAttribute("status"),void 0!==q&&null!==q)r=n.getAttribute("uid"),H.name="status",H.value=parseInt(q),H.uid=r;else{var I=n.getAttribute("callwindowdefaultposition");if(void 0!=I&&null!==I)H.name="callWindowDefaultPosition",H.value=I;else{var J=n.getAttribute("domainstatus");if(void 0!==J&&null!==J){var K=n.getAttribute("domain");H.name="domainstatus",H.value=parseInt(J),H.domain=K}else{var L=n.getAttribute("domainprofile");void 0!==L&&null!==L&&(H.name="domainprofile",H.value=parseInt(L))}}}else if(s=c.getElementsByTagName("createdcall")[0],void 0!==s&&null!==s)H.createdCallId=s.getAttribute("id"),H.direction=s.getAttribute("direction"),H.displayNameToCall=s.getAttribute("displayname"),G="callCreated";else if(t=c.getElementsByTagName("statuscall")[0],void 0!==t&&null!==t)if(G="onCallStatusReceived",z=t.getAttribute("id"),H.id=z,A=t.getElementsByTagName("call")[0],void 0!==A&&null!==A){if(H.type="call",H.status=A.childNodes[0].nodeValue,"terminated"==H.status){var M=t.getElementsByTagName("reason")[0];H.reason=M.childNodes[0].nodeValue}}else u=t.getElementsByTagName("video_local")[0],void 0!==u&&null!==u?(H.type="video_local",H.status=u.childNodes[0].nodeValue):(v=t.getElementsByTagName("video_remote")[0],void 0!==v&&null!==v?(H.type="video_remote",H.status=v.childNodes[0].nodeValue):(w=t.getElementsByTagName("share_local")[0],void 0!==w&&null!==w?(H.type="share_local",H.status=w.childNodes[0].nodeValue):(x=t.getElementsByTagName("share_remote")[0],void 0!==x&&null!==x?(H.type="share_remote",H.status=x.childNodes[0].nodeValue):(y=t.getElementsByTagName("sound")[0],void 0!==y&&null!==y&&(H.type="sound",H.status=y.childNodes[0].nodeValue)))));else B=c.getElementsByTagName("readyforconnection")[0],void 0!==B&&null!==B?G="onReadyforconnection":(C=c.getElementsByTagName("kicked")[0],void 0!==C&&null!==C?(G="kicked",H.kickedName=C.getAttribute("displayname"),H.kickedUrl=C.getAttribute("urlreferer")):(droppedNode=c.getElementsByTagName("dropped")[0],void 0!==droppedNode&&null!==droppedNode?(G="dropped",H.droppedName=droppedNode.getAttribute("displayname"),H.droppedUrl=droppedNode.getAttribute("urlreferer")):(E=c.getElementsByTagName("error")[0],void 0!==E&&null!==E?(G="error",H.message=E.childNodes[0].nodeValue):(D=c.getElementsByTagName("disconnected")[0],void 0!==D&&null!==D?G="not_connected":(F=c.getElementsByTagName("hold")[0],void 0!==F&&null!==F&&(G="hold"))))));""!==G&&sm(G,H,a)},createConnection=function(){if("Microsoft Internet Explorer"===browser&&11>browserVersion)null===longpollId&&(longpollId=uniqid()),polling();else try{"function"==typeof MozWebSocket&&(WebSocket=MozWebSocket),websock=new WebSocket(wsUri,protocol),websock.onopen=function(){sm("connected"),debug("BROWSER >>>>> WEBSOCKET IS OPEN")},websock.onclose=function(){debug("BROWSER >>>>> WEBSOCKET IS CLOSE"),sm("not_connected")},websock.onmessage=function(a){handleData(a.data)},websock.onerror=function(){debug("BROWSER >>>>> WEBSOCKET ERROR")}}catch(a){debug("BROWSER >>>>> WEBSOCKET EXCEPTION"),debug(a)}},sendDisplayName=function(){"webrtc"!=connectWith&&sendMessage("<set displayname='"+displayName+"'></set>")},verifyUser=function(a){"webrtc"===connectWith?verifyUserRTC():(a===!0?sendMessage("<verifyuser token='"+token+"' urlreferer='"+webAppId+"' type='"+weemoType+"' force='1'></verifyuser>"):sendMessage("<verifyuser token='"+token+"' urlreferer='"+webAppId+"' type='"+weemoType+"'></verifyuser>"),a=!1)},getStatusInternal=function(a){"webrtc"===connectWith?getStatusRTC(a):sendMessage("<get type='status' uid='"+a+"' />")},getProfileInternal=function(){sendMessage("<get type='domainprofile' />")},getDomainStatusInternal=function(a){sendMessage("<get type='domainstatus' domain='"+a+"' />")},downloadMethod=function(){"webrtc_wd"!==mode&&"wd_webrtc"!==mode||1!==attempt||"Chrome"!==browser?(debug("BROWSER >>>>> WeemoDriver not started | TIME : "+(new Date).toLocaleTimeString()),"function"==typeof self.onWeemoDriverNotStarted&&self.onWeemoDriverNotStarted(downloadUrl)):(connectWith="webrtc",downloadTimeout=null)},WeemoCall=function(a,b,c,d){var e=function(a,b,c){sendMessage("<controlcall id='"+a+"'><"+b+">"+c+"</"+b+"></controlcall>")};this.dn=c,this.parent=d,this.direction=b,this.callId=a,this.status={call:null,video_remote:null,video_local:null,sound:null},this.accept=function(a){"webrtc"===connectWith?(void 0!=a&&null!=a&&""!==a||(a={mandatory:{minWidth:320,minAspectRatio:1.777,maxAspectRatio:1.778}}),globalcall.answer({mediaConstraints:{audio:!0,video:a},extraHeaders:["User-Agent: "+JsSIP.C.USER_AGENT]})):e(this.callId,"call","start")},this.hangup=function(){"webrtc"===connectWith?"active"!==this.status?globalcall.terminate({status_code:603}):globalcall.terminate():e(this.callId,"call","stop")},this.videoStart=function(){if("webrtc"===connectWith){var a=globalcall.getLocalStreams()[0].getVideoTracks()[0];a.enabled=!0,document.getElementById("weemo-selfview").className="",document.getElementById("weemo-buttonnovideo").className="",this.status.video_remote="start","function"==typeof self.onCallHandler&&self.onCallHandler(this,{type:"video_local",status:this.status.video_remote})}else e(this.callId,"video_local","start")},this.videoStop=function(){if("webrtc"===connectWith){var a=globalcall.getLocalStreams()[0].getVideoTracks()[0];a.enabled=!1,document.getElementById("weemo-selfview").style.display="disabled",document.getElementById("weemo-buttonnovideo").className="active",this.status.video_remote="stop","function"==typeof self.onCallHandler&&self.onCallHandler(this,{type:"video_local",status:this.status.video_remote})}else e(this.callId,"video_local","stop")},this.audioMute=function(){if("webrtc"===connectWith){var a,b=globalcall.getLocalStreams()[0].getAudioTracks(),c=b.length;for(a=0;c>a;a+=1)b[a].enabled=!1;document.getElementById("weemo-buttonmute").className="active",this.status.sound="mute","function"==typeof self.onCallHandler&&self.onCallHandler(this,{type:"sound",status:this.status.sound})}else e(this.callId,"sound","mute")},this.audioUnMute=function(){if("webrtc"===connectWith){var a,b=globalcall.getLocalStreams()[0].getAudioTracks(),c=b.length;for(a=0;c>a;a+=1)b[a].enabled=!0;document.getElementById("weemo-buttonmute").className="",this.status.sound="unmute","function"==typeof self.onCallHandler&&self.onCallHandler(this,{type:"sound",status:this.status.sound})}else e(this.callId,"sound","unmute")},this.settings=function(){"webrtc"===connectWith||e(this.callId,"settings","show")},this.shareStart=function(){"webrtc"===connectWith||e(this.callId,"share_local","start")},this.pip=function(){if("webrtc"===connectWith){var a=document.getElementById("weemo-selfview");void 0!=a&&(a.className=""),document.getElementById("weemo-buttonnopip").className=""}else e(this.callId,"pip","show")},this.noPip=function(){if("webrtc"===connectWith){var a=document.getElementById("weemo-selfview");void 0!=a&&(a.className="disabled"),document.getElementById("weemo-buttonnopip").className="active"}else e(this.callId,"pip","hide")}},getCallwindowDefaultPositionInternal=function(){sendMessage('<get type="callwindowdefaultposition" />')},setCallwindowDefaultPositionInternal=function(a){sendMessage('<set callwindowdefaultposition="'+a+'"></set>')},sm=function(a,b,c){var d,e,f,g,h,i=webRTCCapabilities();switch(d=void 0!==c&&""!==c?"WEEMODRIVER TO BROWSER >>>>> "+c+" | STATE = "+state+" | ACTION = "+a+" | TIME = "+(new Date).toLocaleTimeString():"STATE = "+state+" | ACTION = "+a+" | TIME = "+(new Date).toLocaleTimeString(),debug(d),state){case"NOT_CONNECTED":case"RECONNECT":if(""!==a)switch(a){case"not_connected":case"connect":forceClose=!1,"webrtc_only"===mode?connectWith="webrtc":"wd_only"===mode&&(connectWith="wd"),"webrtc_only"!==mode&&"webrtc_wd"!==mode&&"wd_webrtc"!==mode||"webrtc"!==connectWith||(i===!0?"Chrome"===browser?(debug("---------------------------"),debug("Trying to connect with webRTC"),debug("---------------------------"),connectWith="webrtc"):connectWith="webrtc_wd"===mode||"wd_webrtc"===mode?"wd":"error":connectWith="webrtc_wd"===mode||"wd_webrtc"===mode?"wd":"error"),"webrtc"===connectWith?(("webrtc_wd"===mode||"wd_webrtc"===mode)&&(attempt=2),getHap()):"error"!==connectWith?(0!==attempt||"webrtc_wd"!==mode&&"wd_webrtc"!==mode||(attempt=1),debug("---------------------------"),debug("Attemp : "+attempt),debug("---------------------------"),"linux"!==os&&"unix"!==os&&"Linux"!==os&&"Unix"!==os?(null!==websock&&void 0!==websock&&(debug("BROWSER WEBSOCKET READYSTATE : "+websock.readyState),websock.onopen=null,websock.onclose=null,websock.onmessage=null,websock.onerror=null,websock=null),null===downloadTimeout&&(downloadTimeout=setTimeout(function(){downloadMethod()},downloadTimeoutValue)),connectTimeout=setTimeout(createConnection,connectionDelay)):("function"==typeof self.onConnectionHandler&&self.onConnectionHandler("unsupportedOS",0),"webrtc_wd"!==mode&&"wd_webrtc"!==mode||i!==!0||(connectWith="webrtc",sm("not_connected")))):"function"==typeof self.onConnectionHandler&&self.onConnectionHandler("browserCompatibilityError",0);break;case"hapNok":"function"==typeof self.onConnectionHandler&&self.onConnectionHandler("unableToReachHap",0),("webrtc_wd"===mode||"wd_webrtc"===mode)&&(connectWith="wd",sm("connect"));break;case"hapOk":"function"==typeof self.onConnectionHandler&&self.onConnectionHandler("hapOk",0);break;case"probesOk":"function"==typeof self.onConnectionHandler&&self.onConnectionHandler("probesOk",b);break;case"probesNok":"function"==typeof self.onConnectionHandler&&self.onConnectionHandler("unableToReachProbes",0),("webrtc_wd"===mode||"wd_webrtc"===mode)&&(connectWith="wd",sm("connect"));break;case"connected":case"connectedWebRTC":clearTimeout(connectTimeout),clearTimeout(downloadTimeout),state="CONNECTED_WEEMO_DRIVER","connectedWebRTC"===a?"function"==typeof self.onConnectionHandler&&self.onConnectionHandler("connectedWebRTC",0):"function"==typeof self.onConnectionHandler&&self.onConnectionHandler("connectedWeemoDriver",0),sm("connect");break;case"createCall":case"getStatus":"function"==typeof self.onConnectionHandler&&self.onConnectionHandler("initializationIncomplete",0)}break;case"CONNECTED_WEEMO_DRIVER":if(""!==a)switch(a){case"forceConnect":case"onReadyforconnection":case"connect":connect(),state="AUTHENTICATING";break;case"not_connected":"webrtc"===connectWith&&("function"==typeof self.onConnectionHandler?self.onConnectionHandler("disconnectedWebRTC",0):"function"==typeof self.onConnectionHandler&&self.onConnectionHandler("disconnectedWeemoDriver",0)),state="NOT_CONNECTED",forceClose===!1&&sm("connect");break;case"createCall":case"getStatus":"function"==typeof self.onConnectionHandler&&self.onConnectionHandler("initializationIncomplete",0);break;case"hold":"function"==typeof self.onConnectionHandler&&self.onConnectionHandler(a,0);break;case"getWdVersion":sendMessage("<get type='version'></get>")}break;case"AUTHENTICATING":if(""!==a)switch(a){case"onConnect":break;case"onConnectionFailed":"webrtc"===connectWith&&("function"==typeof self.onConnectionHandler?self.onConnectionHandler("disconnectedWebRTC",0):"function"==typeof self.onConnectionHandler&&self.onConnectionHandler("disconnectedWeemoDriver",0));break;case"onReadyforconnection":clearTimeout(connectTimeout),connect();break;case"pingNok":"function"==typeof self.onConnectionHandler&&self.onConnectionHandler("unableToReachMgmt",0),("wd_webrtc"===mode||"webrtc_wd"===mode)&&(state="NOT_CONNECTED",connectWith="wd",sm("not_connected"));break;case"pingOk":case"forceConnect":case"onReadyforauthentication":clearTimeout(connectTimeout),"internal"===weemoType||"external"===weemoType?(""!==endpointUrl&&"internal"===weemoType?(e=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),e.onreadystatechange=function(){4===e.readyState&&200===e.status&&(c=JSON.parse(e.responseText),token=c.token,verifyUser(force)),4===e.readyState&&500===e.status&&(f=JSON.parse(e.responseText),f.error&&"function"==typeof self.onConnectionHandler&&self.onConnectionHandler("weemoAuthApiError",f.error),f.error_description&&"function"==typeof self.onConnectionHandler&&self.onConnectionHandler("weemoAuthApiError",f.error_description))},e.open("GET",endpointUrl,!0),e.setRequestHeader("Cache-Control","no-cache"),e.setRequestHeader("If-Modified-Since","Sat, 1 Jan 2005 00:00:00 GMT"),e.send()):verifyUser(force),"function"==typeof self.onConnectionHandler&&self.onConnectionHandler("connectedCloud",0)):"function"==typeof self.onConnectionHandler&&self.onConnectionHandler("weemoTypeNotExist",0);break;case"onVerifiedUserOk":"function"==typeof self.onConnectionHandler&&self.onConnectionHandler("authenticated",0);break;case"loggedasotheruser":"function"==typeof self.onConnectionHandler&&self.onConnectionHandler("loggedasotheruser",0);break;case"hold":"function"==typeof self.onConnectionHandler&&self.onConnectionHandler("loggedonotherdevice",0),state="CONNECTED_WEEMO_DRIVER";break;case"audioOk":case"audioNok":case"sipNok":"function"==typeof self.onConnectionHandler&&self.onConnectionHandler(a,0),"webrtc"!==connectWith||"wd_webrtc"!==mode&&"webrtc_wd"!==mode||(connectWith="wd",state="NOT_CONNECTED",sm("connect"));break;case"sipOk":"webrtc"!=connectWith&&sendMessage("<get type='version'></get>"),callObjects.splice(0,callObjects.length),state="CONNECTED",void 0!==displayName&&""!==displayName&&null!==displayName&&sendDisplayName(),"function"==typeof self.onConnectionHandler&&self.onConnectionHandler(a,0);break;case"onVerifiedUserNok":if("function"==typeof self.onConnectionHandler&&self.onConnectionHandler("unauthenticated",0),state="CONNECTED_WEEMO_DRIVER",b.error)switch(b.error){case"9":state="CONNECTED_WEEMO_DRIVER","function"==typeof self.onConnectionHandler&&self.onConnectionHandler("error",9),debug("Allocation: Provider not recognized (err "+b.error+")");break;case"10":state="CONNECTED_WEEMO_DRIVER","function"==typeof self.onConnectionHandler&&self.onConnectionHandler("error",10),debug("Allocation: Domain not recognized (err "+b.error+")");break;case"11":state="CONNECTED_WEEMO_DRIVER","function"==typeof self.onConnectionHandler&&self.onConnectionHandler("error",11),debug("Allocation: Provider not enabled (err "+b.error+")");break;case"12":state="CONNECTED_WEEMO_DRIVER","function"==typeof self.onConnectionHandler&&self.onConnectionHandler("error",12),debug("Allocation: Domain not enabled (err "+b.error+")");break;case"13":state="CONNECTED_WEEMO_DRIVER","function"==typeof self.onConnectionHandler&&self.onConnectionHandler("error",13),debug("Allocation: No such user (err "+b.error+")");break;case"14":state="CONNECTED_WEEMO_DRIVER","function"==typeof self.onConnectionHandler&&self.onConnectionHandler("error",14),debug("Token: token is too short (err "+b.error+")");break;case"15":state="CONNECTED_WEEMO_DRIVER","function"==typeof self.onConnectionHandler&&self.onConnectionHandler("error",15),debug("WeemoDriver: Internal error (err "+b.error+")");break;default:debug("Error message : General error. Please contact support (err "+b.error+")")}break;case"not_connected":"webrtc"===connectWith&&("function"==typeof self.onConnectionHandler?self.onConnectionHandler("disconnectedWebRTC",0):"function"==typeof self.onConnectionHandler&&self.onConnectionHandler("disconnectedWeemoDriver",0)),forceClose===!1?(state="RECONNECT",sm("connect")):state="NOT_CONNECTED";break;case"createCall":case"getStatus":"function"==typeof self.onConnectionHandler&&self.onConnectionHandler("initializationIncomplete",0);break;case"dropped":case"kicked":break;case"getProfile":getProfileInternal();break;case"getDomainStatus":getDomainStatusInternal(b.domain);break;case"set":"displayName"===b.name&&(displayName=b.value),"function"==typeof self.onGetHandler&&self.onGetHandler(b.name,b);break;case"getWdVersion":sendMessage("<get type='version'></get>")}break;case"CONNECTED":if(""!==a)switch(a){case"createCall":if("webrtc"===connectWith)if(void 0===globalcall||null===globalcall)if(callout=1,debug("-------------------"),debug("Federation: "+federation),debug("Hash_type: "+hash_type),"attendee"===b.type||"host"===b.type){var j=new WeemoCall;"function"==typeof self.onCallHandler&&self.onCallHandler(j,{type:"webRTCcall",status:"terminated",reason:"notAllowed"})}else if("external"!==weemoType){var k={mandatory:{minWidth:320,minAspectRatio:1.777,maxAspectRatio:1.778}};1==federation?(weemoApp.call("sip:"+utils.sha1(providerid+domainid+b.uidToCall),{mediaConstraints:{audio:!0,video:k},extraHeaders:["X-display-name: "+b.displayNameToCall]}),debug("Uid called : "+utils.sha1(providerid+domainid+b.uidToCall))):2==federation?(weemoApp.call("sip:"+utils.sha1(providerid+b.uidToCall),{mediaConstraints:{audio:!0,video:k},extraHeaders:["X-display-name: "+b.displayNameToCall]}),debug("Uid called : "+utils.sha1(providerid+b.uidToCall))):3==federation&&(weemoApp.call("sip:"+utils.sha1(hash_type+b.uidToCall),{mediaConstraints:{audio:!0,video:k},extraHeaders:["X-display-name: "+b.displayNameToCall]}),debug("Uid called : "+utils.sha1(hash_type+b.uidToCall)))}else{var j=new WeemoCall;"function"==typeof self.onCallHandler&&self.onCallHandler(j,{type:"webRTCcall",status:"terminated",reason:"notAllowed"})}else{var j=new WeemoCall;"function"==typeof self.onCallHandler&&self.onCallHandler(j,{type:"webRTCcall",status:"terminated",reason:"notAllowed"})}else""!==displayName&&void 0!==displayName?void 0!==b.uidToCall&&""!==b.uidToCall&&void 0!==b.type&&""!==b.type&&void 0!==b.displayNameToCall&&""!==b.displayNameToCall?(("host"===b.type||"attendee"===b.type)&&(g=b.uidToCall.substr(0,4),"nyc1"!==g&&"par1"!==g&&"par2"!==g&&"ldn1"!==g&&"ldn2"!==g&&"nyc2"!==g&&"sfo2"!==g&&"hkg2"!==g&&(b.uidToCall="ppr/"===hap?"ldn2"+b.uidToCall:"nyc2"+b.uidToCall)),calledContact=b.displayNameToCall,debug("Uid called : "+b.uidToCall),sendMessage("<createcall uid='"+b.uidToCall+"' displayname='"+b.displayNameToCall+"' type='"+b.type+"'></createcall>")):debug("uidToCall, type and displayNameToCall must be set"):"function"==typeof self.onConnectionHandler&&self.onConnectionHandler("error",16);break;case"callCreated":"-1"!==b.createdCallId&&(h=new WeemoCall(b.createdCallId,b.direction,b.displayNameToCall,self),callObjects[b.createdCallId]=h,callObjects[b.createdCallId].status.sound="mute",callObjects[b.createdCallId].status.video_remote="stop",callObjects[b.createdCallId].status.video_local="stop","out"===b.direction?(calledContact===b.displayNameToCall&&(callObjects[b.createdCallId].status.call="callCreated","function"==typeof self.onCallHandler&&self.onCallHandler(callObjects[b.createdCallId],{type:"call",status:callObjects[b.createdCallId].status.call}),callObjects[b.createdCallId].accept()),calledContact=""):(callObjects[b.createdCallId].status.call="incoming","function"==typeof self.onCallHandler&&self.onCallHandler(callObjects[b.createdCallId],{type:"call",status:"incoming"})));break;case"dropped":case"kicked":calledContact="",longpollId=null,token=null,displayName="",callObjects=[],attempt=0,state="NOT_CONNECTED","function"==typeof self.onConnectionHandler&&self.onConnectionHandler("dropped",0);break;case"setDisplayName":sendDisplayName();break;case"setCallwindowDefaultPosition":"webrtc"===connectWith?"function"==typeof self.onConnectionHandler&&self.onConnectionHandler("notUseInThisMode",0):setCallwindowDefaultPositionInternal(b.value);break;case"getCallwindowDefaultPosition":"webrtc"===connectWith?"function"==typeof self.onConnectionHandler&&self.onConnectionHandler("notUseInThisMode",0):getCallwindowDefaultPositionInternal();break;case"audioOk":case"audioNok":"function"==typeof self.onConnectionHandler&&self.onConnectionHandler(a,0);break;case"keepaliveNok":case"sipNok":"function"==typeof self.onConnectionHandler&&self.onConnectionHandler("sipNok",0),calledContact="",state="NOT_CONNECTED",sm("connect");break;case"set":"displayName"===b.name&&(displayName=b.value),"function"==typeof self.onGetHandler&&self.onGetHandler(b.name,b);break;case"getStatus":getStatusInternal(b.uidStatus);break;case"onCallStatusReceived":switch(b.type){case"call":callObjects[b.id].status.call=b.status,"terminated"===b.status&&(callObjects[b.id].status.reason=b.reason),"active"===b.status&&(callObjects[b.id].status.sound="unmute");break;case"video_local":callObjects[b.id].status.video_local=b.status;break;case"video_remote":callObjects[b.id].status.video_remote=b.status;break;case"sound":callObjects[b.id].status.sound=b.status}"function"==typeof self.onCallHandler&&(""!=b.reason&&void 0!=b.reason&&null!=b.reason?self.onCallHandler(callObjects[b.id],{type:b.type,status:b.status,reason:b.reason}):self.onCallHandler(callObjects[b.id],{type:b.type,status:b.status})),"terminated"===b.status&&(callObjects[b.id]=new Object);break;case"not_connected":calledContact="","webrtc"===connectWith?"function"==typeof self.onConnectionHandler&&self.onConnectionHandler("disconnectedWebRTC",0):"function"==typeof self.onConnectionHandler&&self.onConnectionHandler("disconnectedWeemoDriver",0),forceClose===!1?(state="RECONNECT",sm("connect")):state="NOT_CONNECTED";
break;case"getProfile":getProfileInternal();break;case"getDomainStatus":getDomainStatusInternal(b.domain);break;case"getWdVersion":sendMessage("<get type='version'></get>")}}if("error"===a)switch(debug("Error id : "+b.message),b.message){case"1":state="CONNECTED_WEEMO_DRIVER",debug("Long poll: Internal WebService init error (err "+b.error+")"),sm("connect");break;case"2":debug("Long poll: Wrong WebService init session (err "+b.error+")"),polling();break;case"3":debug("Long poll: WebService init syntax error (err "+b.error+")");break;case"4":debug("Long poll: Internal WebService verify error (err "+b.error+")"),state="RECONNECT",sm("connect");break;case"5":debug("WebService verify syntax error (err "+b.error+")");break;case"6":debug("Wrong credentials (err "+b.error+")"),state="CONNECTED_WEEMO_DRIVER",sm("connect");break;case"7":state="CONNECTED_WEEMO_DRIVER","function"==typeof self.onConnectionHandler&&self.onConnectionHandler("error",7),debug("Cloud connection: Can't connect to the Cloud (err "+b.error+")"),clearTimeout(connectTimeout),connectTimeout=setTimeout(function(){sm("connect")},3e3);break;case"8":"AUTHENTICATING"!==state&&"CONNECTED_WEEMO_DRIVER"!==state&&(state="CONNECTED_WEEMO_DRIVER","function"==typeof self.onConnectionHandler&&self.onConnectionHandler("error",8),debug("Cloud connection: Disconnected from the Cloud (err "+b.error+")"),clearTimeout(connectTimeout),connectTimeout=setTimeout(function(){sm("connect")},3e3));break;default:debug("Error message : General error. Please contact support (err "+b.error+")")}},jQuerySendMessage=function(a){data=a,data=utils.trim(data.x);var b=utils.strpos(data,":");if(b!==!1){var c=data.substring(0,b);data=data.substring(b+1)}if(""!=data&&void 0!=data&&void 0!=c&&c==longpollId)try{handleData(data)}catch(d){debug(d)}},jQueryPolling=function(a){if(sm("connected"),data=a,""!=data&&void 0!=data){var b=utils.strpos(data.x,":");if(b!==!1){var c=data.x.substring(0,b);c==longpollId&&(data.x=data.x.substring(b+1),handleData(data.x),polling())}else polling()}},extractVideoFlowInfo=function(a,b){var c="",d=a.stat("bytesReceived");if(timestampPrev>0){var e=Math.round(8*(d-bytesPrev)/(a.timestamp-timestampPrev));c=e+" kbits/sec"}return timestampPrev=a.timestamp,bytesPrev=d,a.stat("transportId")?(component=b.get(a.stat("transportId")),component?(addresses=b.collectAddressPairs(component.id),addresses.length>0?(c+=" from IP ",c+=addresses[0].stat("googRemoteAddress")):c+=" no address"):c+=" No component stats"):c+=" No component ID",c},setBrowserInfo=function(){var a,b,c="Unbekannt";screen.width&&(a=screen.width?screen.width:"",b=screen.height?screen.height:"",screenSize=a+" x "+b);var d=navigator.appVersion,e=navigator.userAgent;browser=navigator.appName,browserVersion=""+parseFloat(navigator.appVersion);var f,g,h,i=parseInt(navigator.appVersion,10);-1!=(g=e.indexOf("Opera"))?(browser="Opera",browserVersion=e.substring(g+6),-1!=(g=e.indexOf("Version"))&&(browserVersion=e.substring(g+8))):-1!=(g=e.indexOf("MSIE"))?(browser="Microsoft Internet Explorer",browserVersion=e.substring(g+5)):-1!=(g=e.indexOf("Trident/7."))?(browser="Microsoft Internet Explorer",-1!=(g=e.indexOf("rv:"))&&(browserVersion=e.substring(g+3,g+7))):-1!=(g=e.indexOf("Chrome"))?(browser="Chrome",browserVersion=e.substring(g+7)):-1!=(g=e.indexOf("Safari"))?(browser="Safari",browserVersion=e.substring(g+7),-1!=(g=e.indexOf("Version"))&&(browserVersion=e.substring(g+8))):-1!=(g=e.indexOf("Firefox"))?(browser="Firefox",browserVersion=e.substring(g+8)):(f=e.lastIndexOf(" ")+1)<(g=e.lastIndexOf("/"))&&(browser=e.substring(f,g),browserVersion=e.substring(g+1),browser.toLowerCase()==browser.toUpperCase()&&(browser=navigator.appName)),-1!=(h=browserVersion.indexOf(";"))&&(browserVersion=browserVersion.substring(0,h)),-1!=(h=browserVersion.indexOf(" "))&&(browserVersion=browserVersion.substring(0,h)),i=parseInt(""+browserVersion,10),isNaN(i)&&(browserVersion=""+parseFloat(navigator.appVersion),i=parseInt(navigator.appVersion,10)),mobile=/Mobile|mini|Fennec|Android|iP(ad|od|hone)/.test(d);var j=navigator.cookieEnabled?!0:!1;"undefined"!=typeof navigator.cookieEnabled||j||(document.cookie="testcookie",j=-1!=document.cookie.indexOf("testcookie")?!0:!1),os=c;var k=[{s:"Windows 3.11",r:/Win16/},{s:"Windows 95",r:/(Windows 95|Win95|Windows_95)/},{s:"Windows 98",r:/(Windows 98|Win98)/},{s:"Windows CE",r:/Windows CE/},{s:"Windows 2000",r:/(Windows NT 5.0|Windows 2000)/},{s:"Windows XP",r:/(Windows NT 5.1|Windows XP)/},{s:"Windows Server 2003",r:/Windows NT 5.2/},{s:"Windows Vista",r:/Windows NT 6.0/},{s:"Windows 7",r:/(Windows 7|Windows NT 6.1)/},{s:"Windows 8.1",r:/(Windows 8.1|Windows NT 6.3)/},{s:"Windows 8",r:/(Windows 8|Windows NT 6.2)/},{s:"Windows NT 4.0",r:/(Windows NT 4.0|WinNT4.0|WinNT|Windows NT)/},{s:"Windows ME",r:/Windows ME/},{s:"Android",r:/Android/},{s:"Open BSD",r:/OpenBSD/},{s:"Sun OS",r:/SunOS/},{s:"Linux",r:/(Linux|X11)/},{s:"iOS",r:/(iPhone|iPad|iPod)/},{s:"Mac OS X",r:/Mac OS X/},{s:"Mac OS",r:/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/},{s:"QNX",r:/QNX/},{s:"UNIX",r:/UNIX/},{s:"BeOS",r:/BeOS/},{s:"OS/2",r:/OS\/2/},{s:"Search Bot",r:/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask Jeeves\/Teoma|ia_archiver)/}];for(var l in k){var m=k[l];if(m.r.test(e)){os=m.s;break}}switch(osVersion=c,/Windows/.test(os)&&(osVersion=/Windows (.*)/.exec(os)[1],os="Windows"),os){case"Mac OS X":osVersion=/Mac OS X (10[\.\_\d]+)/.exec(e)[1];break;case"Android":osVersion=/Android ([\.\_\d]+)/.exec(e)[1];break;case"iOS":osVersion=/OS (\d+)_(\d+)_?(\d+)?/.exec(d),osVersion=osVersion[1]+"."+osVersion[2]+"."+(0|osVersion[3])}};"object"==typeof options&&void 0!=options.debugLevel?debugLevel=options.debugLevel:void 0!==pDebugLevel&&(debugLevel=pDebugLevel),"object"==typeof options&&void 0!=options.displayName?displayName=options.displayName:void 0!==pDisplayName&&(displayName=pDisplayName),downloadTimeoutValue="Microsoft Internet Explorer"===browser&&11>browserVersion?2e4:8e3,this.coredump=function(){sendMessage("<coredump></coredump>")},this.getDownloadUrl=function(){return downloadUrl},this.getWdVersion=function(){sm("getWdVersion")},this.setCallWindowDefaultPosition=function(a){callwindowDefaultPosition=a;var b=new Object;b.value=a,sm("setCallwindowDefaultPosition",b)},this.getCallWindowDefaultPosition=function(){sm("getCallwindowDefaultPosition")},this.setToken=function(a){token=a},this.setWebAppId=function(a){webAppId=a},this.setDebugLevel=function(a){debugLevel=a},this.setDisplayName=function(a){displayName=a,sm("setDisplayName")},this.setWeemoType=function(a){weemoType=a},this.setHap=function(a){hap=a},this.getVersion=function(){return version},this.getDisplayName=function(){return displayName},this.getStatus=function(a){var b=Object.create(null);b.uidStatus=a,sm("getStatus",b)},this.getToken=function(){return token},this.getWebAppId=function(){return webAppId},this.initialize=function(){var a=webRTCCapabilities();a===!0?"function"==typeof self.onConnectionHandler&&self.onConnectionHandler("webRTCCapabilities",1):"function"==typeof self.onConnectionHandler&&self.onConnectionHandler("webRTCCapabilities",0),sm("connect")},this.authenticate=function(a){void 0!==a&&a!==!1&&(force=!0,sm("forceConnect"))},this.createCall=function(a,b,c){var d=Object.create(null);d.uidToCall=a,d.type=b,d.displayNameToCall=c,sm("createCall",d)},this.getProfile=function(){if("webrtc"===connectWith){if(void 0!=conf_level){var a=new Object;a.name="domainprofile",a.value=parseInt(conf_level),sm("set",a)}}else sm("getProfile")},this.getDomainStatus=function(a){if("webrtc"===connectWith)params.name="domainstatus",params.domain=a,params.value=-1!==domains.indexOf(a)?1:0,sm("set",params);else{var b=Object.create(null);b.domain=a,sm("getDomainStatus",b)}},this.reset=function(){"webrtc"===connectWith?disconnectRTC():sendMessage("<reset></reset>"),forceClose=!0,token=null,webAppId="",longpollId=null,displayName="",calledContact="",callObjects=[],attempt=0},setBrowserInfo(),debug("OS : "+os),debug("OS version : "+osVersion),debug("Is mobile : "+mobile),debug("Browser : "+browser),debug("Browser version : "+browserVersion),debug("JS version : "+version),debug("Screensize : "+screenSize),debug("Mode : "+mode),debug("---------------------------"),debug("Use jQuery : "+useJquery),debug("jQuery is loaded : "+(window.jQuery?"true":"false")),debug("---------------------------"),"webrtc_only"!==mode&&"webrtc_wd"!==mode&&"wd_webrtc"!==mode||"Chrome"!==browser||(!function(a,b){var c=a.createElement(b),d=a.getElementsByTagName(b)[0];switch(hap){case"dev/":c.src="https://static-dev.weemo.com/js/jssip-0.4.0-video-stop.js";break;case"qualif/":c.src="https://static-qualif.weemo.com/js/jssip-0.4.0-video-stop.js";break;case"ppr/":c.src="https://static-ppr.weemo.com/js/jssip-0.4.0-video-stop.min.js";break;default:c.src="https://static.weemo.com/js/jssip-0.4.0-video-stop.min.js"}d.parentNode.insertBefore(c,d)}(document,"script"),loadCss===!0&&loadDefaultStyle())};AugumentedStatsResponse.prototype.collectAddressPairs=function(a){if(!this.addressPairMap[a]){this.addressPairMap[a]=[];for(var b=0;b<this.response.result().length;++b){var c=this.response.result()[b];"googCandidatePair"==c.type&&c.stat("googChannelId")==a&&this.addressPairMap[a].push(c)}}return this.addressPairMap[a]},AugumentedStatsResponse.prototype.result=function(){return this.response.result()},AugumentedStatsResponse.prototype.get=function(a){return this.response[a]};